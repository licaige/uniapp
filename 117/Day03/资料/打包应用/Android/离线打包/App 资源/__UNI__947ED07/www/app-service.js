if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e,t){"use strict";var n=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};var i=n({__name:"tab-control",props:{titles:{type:Array,default:()=>[]}},emits:["tabItemClick"],setup(t,{emit:n}){const i=e.ref(0);return(r,o)=>(e.openBlock(),e.createElementBlock("view",{class:"tab-control"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.titles,((t,r)=>(e.openBlock(),e.createElementBlock("view",{key:r,class:e.normalizeClass(["item",i.value===r?"active":""]),onClick:e=>function(e){i.value=e,n("tabItemClick",e)}(r)},[e.createElementVNode("text",{class:"title"},e.toDisplayString(t),1)],10,["onClick"])))),128))]))}},[["__scopeId","data-v-4f2235d6"]]);function r(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}function o(e,n){return t.isString(e)?n:e}const a=t=>(n,i=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,n,i)},s=a("onLoad"),c=a("onReachBottom");var l=n({__name:"grid-view-item",props:{itemInfo:{type:Object,default:()=>{}}},emits:["itemClick"],setup(t,{emit:n}){const i=t;function r(){n("itemClick",i.itemInfo)}return(n,i)=>(e.openBlock(),e.createElementBlock("view",{class:"goods-item",onClick:r},[e.createElementVNode("image",{class:"image","lazy-load":!0,src:t.itemInfo.show.img,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"desc-info"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.itemInfo.title),1),e.createElementVNode("view",{class:"info"},[e.createElementVNode("text",{class:"price"},"¥"+e.toDisplayString(t.itemInfo.price),1),e.createElementVNode("image",{class:"icon",src:"/static/images/common/favor.png",mode:""}),e.createElementVNode("text",{class:"cfav"},e.toDisplayString(t.itemInfo.cfav),1)])])]))}},[["__scopeId","data-v-2e885f3b"]]);var u=n({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(t,n,i,r,o,a){return o.width?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle("width:"+o.width+";"+(o.square?"height:"+o.width:"")),class:"uni-grid-item"},[e.createElementVNode("view",{class:e.normalizeClass([{"uni-grid-item--border":o.showBorder,"uni-grid-item--border-top":o.showBorder&&i.index<o.column,"uni-highlight":o.highlight},"uni-grid-item__box"]),style:e.normalizeStyle({"border-right-color":o.borderColor,"border-bottom-color":o.borderColor,"border-top-color":o.borderColor}),onClick:n[0]||(n[0]=(...e)=>a._onClick&&a._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-03164978"]]);var d=n({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,n)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){uni.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}},[["render",function(t,n,i,r,o,a){return e.openBlock(),e.createElementBlock("view",{class:"uni-grid-wrap"},[e.createElementVNode("view",{id:o.elId,ref:"uni-grid",class:e.normalizeClass(["uni-grid",{"uni-grid--border":i.showBorder}]),style:e.normalizeStyle({"border-left-color":i.borderColor})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],14,["id"])])}],["__scopeId","data-v-32f05aa8"]]);
/*!
    * pinia v2.0.14
    * (c) 2022 Eduardo San Martin Morote
    * @license MIT
    */
let p;const m=e=>p=e,h=Symbol();function f(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var g,y;(y=g||(g={})).direct="direct",y.patchObject="patch object",y.patchFunction="patch function";const v="undefined"!=typeof window;function _(){const t=e.effectScope(!0),n=t.run((()=>e.ref({})));let i=[],r=[];const o=e.markRaw({install(e){m(o),o._a=e,e.provide(h,o),e.config.globalProperties.$pinia=o,r.forEach((e=>i.push(e))),r=[]},use(e){return this._a?i.push(e):r.push(e),this},_p:i,_a:null,_e:t,_s:new Map,state:n});return o}const w=()=>{};function k(t,n,i,r=w){t.push(n);const o=()=>{const e=t.indexOf(n);e>-1&&(t.splice(e,1),r())};return!i&&e.getCurrentInstance()&&e.onUnmounted(o),o}function b(e,...t){e.slice().forEach((e=>{e(...t)}))}function B(t,n){for(const i in n){if(!n.hasOwnProperty(i))continue;const r=n[i],o=t[i];f(o)&&f(r)&&t.hasOwnProperty(i)&&!e.isRef(r)&&!e.isReactive(r)?t[i]=B(o,r):t[i]=r}return t}const C=Symbol();const{assign:A}=Object;function I(t,n,i={},r,o,a){let s;const c=A({actions:{}},i),l={deep:!0};let u,d,p,h=e.markRaw([]),y=e.markRaw([]);const v=r.state.value[t];let _;function I(n){let i;u=d=!1,"function"==typeof n?(n(r.state.value[t]),i={type:g.patchFunction,storeId:t,events:p}):(B(r.state.value[t],n),i={type:g.patchObject,payload:n,storeId:t,events:p});const o=_=Symbol();e.nextTick().then((()=>{_===o&&(u=!0)})),d=!0,b(h,i,r.state.value[t])}a||v||(r.state.value[t]={}),e.ref({});const S=w;function E(e,n){return function(){m(r);const i=Array.from(arguments),o=[],a=[];function s(e){o.push(e)}function c(e){a.push(e)}let l;b(y,{args:i,name:e,store:P,after:s,onError:c});try{l=n.apply(this&&this.$id===t?this:P,i)}catch(u){throw b(a,u),u}return l instanceof Promise?l.then((e=>(b(o,e),e))).catch((e=>(b(a,e),Promise.reject(e)))):(b(o,l),l)}}const $={_p:r,$id:t,$onAction:k.bind(null,y),$patch:I,$reset:S,$subscribe(n,i={}){const o=k(h,n,i.detached,(()=>a())),a=s.run((()=>e.watch((()=>r.state.value[t]),(e=>{("sync"===i.flush?d:u)&&n({storeId:t,type:g.direct,events:p},e)}),A({},l,i))));return o},$dispose:function(){s.stop(),h=[],y=[],r._s.delete(t)}},P=e.reactive(A({},$));r._s.set(t,P);const V=r._e.run((()=>(s=e.effectScope(),s.run((()=>n())))));for(const m in V){const n=V[m];if(e.isRef(n)&&(j=n,!e.isRef(j)||!j.effect)||e.isReactive(n))a||(!v||f(x=n)&&x.hasOwnProperty(C)||(e.isRef(n)?n.value=v[m]:B(n,v[m])),r.state.value[t][m]=n);else if("function"==typeof n){const e=E(m,n);V[m]=e,c.actions[m]=n}}var x,j;return A(P,V),A(e.toRaw(P),V),Object.defineProperty(P,"$state",{get:()=>r.state.value[t],set:e=>{I((t=>{A(t,e)}))}}),r._p.forEach((e=>{A(P,s.run((()=>e({store:P,app:r._a,pinia:r,options:c}))))})),v&&a&&i.hydrate&&i.hydrate(P.$state,v),u=!0,d=!0,P}function S(t,n,i){let r,o;const a="function"==typeof n;function s(t,i){const s=e.getCurrentInstance();(t=t||s&&e.inject(h))&&m(t),(t=p)._s.has(r)||(a?I(r,n,o,t):function(t,n,i,r){const{state:o,actions:a,getters:s}=n,c=i.state.value[t];let l;l=I(t,(function(){c||(i.state.value[t]=o?o():{});const n=e.toRefs(i.state.value[t]);return A(n,a,Object.keys(s||{}).reduce(((n,r)=>(n[r]=e.markRaw(e.computed((()=>{m(i);const e=i._s.get(t);return s[r].call(e,e)}))),n)),{}))}),n,i,0,!0),l.$reset=function(){const e=o?o():{};this.$patch((t=>{A(t,e)}))}}(r,o,t));return t._s.get(r)}return"string"==typeof t?(r=t,o=a?i:n):(o=t,r=t.id),s.$id=r,s}let E="Store";function $(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]=function(){return e(this.$pinia)[n]},t)),{}):Object.keys(t).reduce(((n,i)=>(n[i]=function(){const n=e(this.$pinia),r=t[i];return"function"==typeof r?r.call(this,n):n[r]},n)),{})}const P=$;function V(t){{t=e.toRaw(t);const n={};for(const i in t){const r=t[i];(e.isRef(r)||e.isReactive(r))&&(n[i]=e.toRef(t,i))}return n}}var x=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get MutationType(){return g},PiniaVuePlugin:function(e){e.mixin({beforeCreate(){const e=this.$options;if(e.pinia){const t=e.pinia;if(!this._provided){const e={};Object.defineProperty(this,"_provided",{get:()=>e,set:t=>Object.assign(e,t)})}this._provided[h]=t,this.$pinia||(this.$pinia=t),t._a=this,v&&m(t)}else!this.$pinia&&e.parent&&e.parent.$pinia&&(this.$pinia=e.parent.$pinia)},destroyed(){delete this._pStores}})},acceptHMRUpdate:function(e,t){return n=>{const i=t.data.pinia||e._pinia;if(i){t.data.pinia=i;for(const o in n){const a=n[o];if("function"==typeof(r=a)&&"string"==typeof r.$id&&i._s.has(a.$id)){const n=a.$id;if(n!==e.$id)return console.warn(`The id of the store changed from "${e.$id}" to "${n}". Reloading.`),t.invalidate();const r=i._s.get(n);if(!r)return void console.log("[Pinia]: skipping hmr because store doesn't exist yet");a(i,r)}}var r}}},createPinia:_,defineStore:S,getActivePinia:()=>e.getCurrentInstance()&&e.inject(h)||p,mapActions:function(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]=function(...t){return e(this.$pinia)[n](...t)},t)),{}):Object.keys(t).reduce(((n,i)=>(n[i]=function(...n){return e(this.$pinia)[t[i]](...n)},n)),{})},mapGetters:P,mapState:$,mapStores:function(...e){return e.reduce(((e,t)=>(e[t.$id+E]=function(){return t(this.$pinia)},e)),{})},mapWritableState:function(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]={get(){return e(this.$pinia)[n]},set(t){return e(this.$pinia)[n]=t}},t)),{}):Object.keys(t).reduce(((n,i)=>(n[i]={get(){return e(this.$pinia)[t[i]]},set(n){return e(this.$pinia)[t[i]]=n}},n)),{})},setActivePinia:m,setMapStoreSuffix:function(e){E=e},skipHydrate:function(e){return Object.defineProperty(e,C,{})},storeToRefs:V});var j=new class{request(e,t,n){return new Promise(((i,r)=>{uni.request({url:"http://152.136.185.210:7878/api/hy66"+e,method:t||"GET",timeout:6e4,data:n,success(e){i(e.data)},fail(e){r(e)}})}))}get(e,t){return this.request(e,"GET",t)}post(e,t){return this.request(e,"POST",params)}};const N=["pop","new","sell"];function O(){let e={};return N.forEach((t=>{e[t]={page:0,list:[]}})),e}const R=S("home",{state:()=>({banners:[],recommends:[],currentType:"pop",goodsList:O()}),actions:{setCurrentType(e){this.currentType=e},async fetchHomeMultidata(){const e=await j.get("/home/multidata",{});this.banners=e.data.banner.list||[],this.recommends=e.data.recommend.list||[]},async fetchHomeData(e,t){r("log","at store/home.js:34",e,t);const n=await((e,t)=>j.get("/home/data",{type:e,page:t}))(e,t);this.goodsList[e].list.push(...n.data.list),this.goodsList[e].page=t}}});var T=n({__name:"home-banner",props:{banners:{type:Array,default:()=>[]}},emits:["bannerItemClick"],setup:(t,{emit:n})=>(i,r)=>(e.openBlock(),e.createElementBlock("swiper",{class:"banner","indicator-dots":!0,"indicator-active-color":"#ff8198",autoplay:!0,interval:3e3,duration:1e3},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.banners,(t=>(e.openBlock(),e.createElementBlock("swiper-item",{key:t,onClick:e=>function(e){n("bannerItemClick",e.link)}(t)},[e.createElementVNode("image",{class:"image",src:t.image,mode:"widthFix"},null,8,["src"])],8,["onClick"])))),128))]))},[["__scopeId","data-v-7f72dca8"]]);var D=n({__name:"home-recommend",props:{recommends:{type:Array,default:()=>[]}},emits:["itemClick"],setup:(t,{emit:n})=>(i,r)=>(e.openBlock(),e.createElementBlock("view",{class:"recommend"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.recommends,(t=>(e.openBlock(),e.createElementBlock("view",{key:t,class:"recommend-item",onClick:e=>function(e){n("itemClick",e)}(t)},[e.createElementVNode("image",{class:"image",src:t.image,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1)],8,["onClick"])))),128))]))},[["__scopeId","data-v-18e02362"]]);var U=n({},[["render",function(t,n){return e.openBlock(),e.createElementBlock("view",{class:"popular"},[e.createElementVNode("image",{class:"image",src:"/static/recommend_bg.jpg",mode:"widthFix"})])}],["__scopeId","data-v-0ca42b8a"]]);const F={__name:"home",setup(t){const n=R(),{banners:r,recommends:a,goodsList:p,currentType:m}=V(n);function h(e){uni.navigateTo({url:"/pages/webview/webview?link="+e})}function f(e){n.setCurrentType(N[e])}function g(e){uni.navigateTo({url:"/pages/detail/detail?iid="+e.iid})}return s((()=>{n.fetchHomeMultidata(),n.fetchHomeData("pop",1),n.fetchHomeData("new",1),n.fetchHomeData("sell",1)})),c((()=>{n.fetchHomeData(m.value,p.value[m.value].page+1)})),(t,n)=>{const s=o(e.resolveDynamicComponent("tab-control"),i),c=o(e.resolveDynamicComponent("grid-view-item"),l),y=o(e.resolveDynamicComponent("uni-grid-item"),u),v=o(e.resolveDynamicComponent("uni-grid"),d);return e.openBlock(),e.createElementBlock("view",{class:"home"},[e.createVNode(T,{banners:e.unref(r),onBannerItemClick:h},null,8,["banners"]),e.createVNode(D,{recommends:e.unref(a)},null,8,["recommends"]),e.createVNode(U),e.createVNode(s,{titles:["流行","新款","精选"],onTabItemClick:f}),e.createVNode(v,{column:2,highlight:!1,showBorder:!1,square:!1,borderColor:"#ff8198"},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(p)[e.unref(m)].list,((t,n)=>(e.openBlock(),e.createBlock(y,{key:t.iid,index:n},{default:e.withCtx((()=>[e.createVNode(c,{itemInfo:t,onItemClick:g},null,8,["itemInfo"])])),_:2},1032,["index"])))),128))])),_:1})])}}};var q=n({data:()=>({})},[["render",function(t,n,i,r,o,a){return e.openBlock(),e.createElementBlock("view")}]]);var H=n({data:()=>({})},[["render",function(t,n,i,r,o,a){return e.openBlock(),e.createElementBlock("view")}]]);var L=n({data:()=>({})},[["render",function(t,n,i,r,o,a){return e.openBlock(),e.createElementBlock("view")}]]);const z={__name:"detail",props:{iid:{type:String,default:""}},setup:t=>(n,i)=>(e.openBlock(),e.createElementBlock("view",null," iid:"+e.toDisplayString(t.iid),1))},G={__name:"webview",props:{link:{type:String,default:""}},setup:t=>(n,i)=>(e.openBlock(),e.createElementBlock("web-view",{src:t.link},null,8,["src"]))};__definePage("pages/home/home",F),__definePage("pages/category/category",q),__definePage("pages/cart/cart",H),__definePage("pages/profile/profile",L),__definePage("pages/detail/detail",z),__definePage("pages/webview/webview",G);const M={onLaunch:function(){r("log","at App.vue:4","App Launch")},onShow:function(){r("log","at App.vue:7","App Show")},onHide:function(){r("log","at App.vue:10","App Hide")}};const{app:J,Vuex:Q,Pinia:W}=function(){const t=e.createVueApp(M);return t.use(_()),{app:t,Pinia:x}}();uni.Vuex=Q,uni.Pinia=W,J.provide("__globalStyles",__uniConfig.styles),J._component.mpType="app",J._component.render=()=>{},J.mount("#app")}(Vue,uni.VueShared);
